.embed-player(ng-class="{share: player.showShare, donate: player.showDonate, subscribe: player.showSubscribe, idle: player.unattended}")
  header
    h1 {{story.currentSound().story.title}}
  section
    button.toggle(ng-click="player.toggle()" ng-class="{paused: player.sound.paused}")
      img.pause(src='/assets/images/em_pause.svg')
      img.play(src='/assets/images/em_play.svg')
    .track(prx-player-scrubber="player.scrubToPercent(percentage)", ng-class="{active: player.active(), flip: player.progress() > 75}")
      canvas.xwaveform
        
      .progress(ng-style="{width: player.progress() + '%'}")
        canvas.xwaveform
  footer
    button(ui-sref=".donate") Donate
    button(ng-click="player.share()") Share
    //- button(ng-click="player.subscribe()") Follow
  .modals
    #idle
      div
        h2 Are you still listening?
        button(ng-click="player.hearMore()") Yes, I want to hear more!
        button Nope, I'm done for now
    #share
      div
        h2 Love this story? Tell someone!
        .sharables
          a.facebook(href="https://www.facebook.com/dialog/share?app_id=119755508101509&display=page&href={{story.shareStoryURL}}&redirect_uri={{story.shareStoryURL}}") 
          a.twitter(href="http://twitter.com/share?text={{story.shareTitle|encodeUri}}&&url={{story.shareStoryURL|encodeUri}}") 
          a.email(href="mailto:?subject={{story.shareTitle|encodeUri}}&body={{story.shareStoryURL}}") 
        button.dismiss(ng-click="player.share()") Close
    
    #subscribe
      div
        h2 Enter your email address to hear this story
        form(novalidate)
          .error Please use a valid email address
          input(type='email' ng-model='player.subscribe.email' placeholder='What is your email address?')
          input(type='submit' value='Start listening' ng-click="player.doSubscribe()")         
        button.skip(ng-click="player.subscribe()") Skip

//- TODO add tracking to share links
//-source embedding site
//-medium share
//- campaign miniprx
